# ☁️ CloudFlare 优选域名汇总

本项目是一个功能强大的 CloudFlare 优选域名信息展示页面。它不仅汇总了社区维护的优质 CF 域名，还集成了丰富的网络检测工具，帮助用户实时了解自己的网络出口情况，并提供详细的 IP 质量分析。

## ✨ 核心功能

- **网络出口检测:** 自动检测并显示用户当前的 **国内**、**国外**、**CloudFlare (ProxyIP)** 和 **Twitter** 出口 IP 及地理位置。
  - **智能 API 切换:** “国内测试” 接口具备故障转移功能，会按 `speedtest.cn` > `ipipv.com` > `ipip.net` 的优先级自动切换，确保最大可用性。
- **IP 详细信息查询 (风控):**
  - 点击网络信息卡片上的任意 IP，可弹窗查询该 IP 的详细信息（数据来源: `ipapi.is`）。
  - **综合滥用评分:** 独家算法（结合运营商、ASN 评分及风险项）计算 IP 的“风控值”，并以百分比和风险等级（如“极度纯净”、“高风险”）直观展示。
  - **安全检测:** 包含是否为 `VPN`, `Proxy`, `Tor`, `爬虫`, `数据中心`, `虚假IP` 等多项安全指标。
  - **详细信息:** 提供 ASN、运营商、地理位置、时区等详细数据。
- **优选域名列表:**
  - 汇总了 **CM 优选**、**官方优选**（如 `www.visa.cn`）和**更多三网优选**域名。
  - 提供延迟统计图（图片使用懒加载优化）。
  - 提供一键复制域名功能（自动去除泛域名前缀）。
  - 提供 `TCPing` 测试链接。
- **现代化前端特性:**
  - **主题切换:** 支持 `亮色/暗色` 模式一键切换，并能自动跟随系统偏好，支持本地记忆。
  - **图片懒加载:** 所有延迟统计图均使用 `IntersectionObserver` 实现懒加载，优化页面首屏加载速度。
  - **Toast 提示:** 提供美观的全局消息提示框（如“复制成功”）。

## 🛠️ 技术栈

- **HTML5:** 语义化标签，结构清晰。
- **CSS3:**
  - 使用 CSS 变量 (`:root`) 实现动态主题切换。
  - 使用 Flexbox 和 Grid 进行现代化布局。
  - 精细的 `:hover`、`@keyframes` 动画（如“三网优选”徽章脉冲、弹窗动画）。
  - 美化的自定义滚动条和响应式设计。
- **JavaScript (ES6+):**
  - **原生 JS:** 无任何框架依赖。
  - **Fetch API:** 用于所有异步网络请求。
  - **IntersectionObserver:** 用于实现图片懒加载。
  - **Clipboard API:** 用于实现“一键复制”，并包含 `document.execCommand` 降级处理。
  - **LocalStorage:** 用于主题偏好记忆。

## 💡 代码优化实践

本项目在原始功能基础上([cf.090227.xyz](https://cf.090227.xyz/))进行了以下架构优化：

1.  **避免全局污染:** 所有 JS 代码均包裹在 `DOMContentLoaded` 监听器中，杜绝了全局变量。
2.  **事件委托 (Event Delegation):** 移除了 HTML 中所有的 `onclick` 内联事件。改用单一的全局点击监听器，通过 `event.target.closest()` 委托处理“复制域名”、“查询 IP 详情”和“弹窗关闭”等所有点击操作，大幅提高性能和可维护性。
3.  **关注点分离 (SoC):** 对核心 JS 功能进行重构，将 `makeIpClickable`（事件绑定）和 `showIpDetailModal`（DOM 渲染）等函数进行职责分离。
4.  **模块化入口:** 使用 `initApp()` 作为统一的应用启动函数，清晰地管理 `initTheme()`, `initLazyLoading()`, `loadNetworkInfo()` 等模块的初始化顺序。

## 🚀 如何运行

1.  克隆或下载本仓库。
2.  使用浏览器直接打开 `index.html` 文件即可。
